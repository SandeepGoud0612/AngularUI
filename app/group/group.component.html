<p-growl [value]="msgs" sticky="sticky"></p-growl>

<form *ngIf="active" #groupForm="ngForm">

    <p-dataTable [value]="groups" selectionMode="single" [responsive]="true" (onRowSelect)="onRowSelect($event)">
        <header>Groups</header>
        <p-column field="name" header="Group Name" [sortable]="true" [filter]="true"></p-column>
        <p-column field="contactCount" header="No of Contacts" [sortable]="true" [filter]="true"></p-column>
        <p-column field="comments" header="Comments" [sortable]="true" [filter]="true"></p-column>
        <footer>
            <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-4">
                    <button type="button" pButton style="float:left" label="Create" (click)="createGroupClick()"></button>
                    <button type="button" pButton style="float:left" label="Import"></button>
                </div>
                <div class="col-md-4"></div>
            </div>
        </footer>
    </p-dataTable>

    <p-dialog [(visible)]="displayViewDialog" [responsive]="true" showEffect="fade" [modal]="true" *ngIf="groupSelected" [width]="800">

        <div class="panel panel-default">
            <div class="panel-heading">
                <center>
                    <h3 class="panel-title">Group Details</h3>
                </center>
            </div>
            <br/>
            <div class="panel-body">
                <div class="row">
                    <div class="form-group" *ngIf="!updateGroup">
                        <label for="name">Group Name</label>
                        <input disabled type="text" class="form-control" id="name" required [(ngModel)]="groupSelected.name" name="name" #name="ngModel">
                    </div>
                    <div class="form-group" *ngIf="updateGroup">
                        <label for="name">Group Name</label>
                        <input type="text" class="form-control" id="name" required [(ngModel)]="groupSelected.name" name="name" #name="ngModel">
                        <div [hidden]="name.valid || name.pristine" class="alert alert-danger">
                            Group name is required
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group" *ngIf="!updateGroup">
                        <label for="comments">Comments</label>
                        <input disabled type="text" class="form-control" id="comments" [(ngModel)]="groupSelected.comments" name="comments" #comments="ngModel">
                    </div>
                    <div class="form-group" *ngIf="updateGroup">
                        <label for="comments">Comments</label>
                        <input type="text" class="form-control" id="comments" [(ngModel)]="groupSelected.comments" name="comments" #comments="ngModel">
                    </div>
                </div>
                <div class="row">
                    <div class="form-group">
                        <label for="comments">No of Contacts</label>
                        <input disabled type="text" class="form-control" id="contactCount" [(ngModel)]="groupSelected.contactCount" name="contactCount"
                            #contactCount="ngModel">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4"></div>
                    <div class="col-md-4">
                        <button *ngIf="!updateGroup" type="button" pButton icon="fa-pencil" (click)="updateGroupClick()" label="Edit"></button>
                        <button *ngIf="!updateGroup" [disabled]="groupSelected.contactCount > 0" type="submit" pButton icon="fa-trash" (click)="deleteSelectedGroup()"
                            label="Delete"></button>
                        <button *ngIf="updateGroup" type="submit" pButton icon="fa-check" (click)="updateGroupSubmit()" label="Submit" [disabled]="!groupForm.form.valid"></button>
                        <button *ngIf="updateGroup" type="button" pButton icon="fa-close" (click)="dialogUpdateCancelClick()" label="Cancel"></button>
                    </div>
                    <div class="col-md-4"></div>
                </div>
            </div>
        </div>

    </p-dialog>

    <p-dialog [(visible)]="displayCreateDialog" [responsive]="true" showEffect="fade" [modal]="true" [width]="800" *ngIf="groupNew">

        <div class="panel panel-default">
            <div class="panel-heading">
                <center>
                    <h3 class="panel-title">Create Group</h3>
                </center>
            </div>
            <br/>
            <div class="panel-body">
                <div class="row">
                    <div class="form-group">
                        <label for="name">Group Name</label>
                        <input type="text" class="form-control" id="name" required [(ngModel)]="groupNew.name" name="name" #name="ngModel">
                        <div [hidden]="name.valid || name.pristine" class="alert alert-danger">
                            Group name is required
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group">
                        <label for="comments">Comments</label>
                        <input type="text" class="form-control" id="comments" [(ngModel)]="groupNew.comments" name="comments" #comments="ngModel">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4"></div>
                    <div class="col-md-4">
                        <button type="submit" pButton icon="fa-check" (click)="createGroupSubmit()" label="Create" [disabled]="!groupForm.form.valid"></button>
                        <button type="button" pButton icon="fa-close" (click)="createDialogCancelClick()" label="Cancel"></button>
                    </div>
                    <div class="col-md-4"></div>
                </div>
                <br/>
            </div>
        </div>

    </p-dialog>

</form>